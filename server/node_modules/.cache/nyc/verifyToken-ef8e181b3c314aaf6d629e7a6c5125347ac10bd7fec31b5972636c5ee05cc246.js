function cov_2jv5mzs72m(){var path="C:\\Users\\admin\\Desktop\\Andela\\Capstone\\UI\\My-BRAND-Raphaela\\server\\routes\\verifyToken.js";var hash="1d6a3e65335aa7654f500886bf985b0ebd0f32bf";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\admin\\Desktop\\Andela\\Capstone\\UI\\My-BRAND-Raphaela\\server\\routes\\verifyToken.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:0},end:{line:13,column:1}},"2":{start:{line:3,column:18},end:{line:3,column:44}},"3":{start:{line:4,column:4},end:{line:4,column:60}},"4":{start:{line:4,column:15},end:{line:4,column:60}},"5":{start:{line:6,column:4},end:{line:12,column:5}},"6":{start:{line:7,column:25},end:{line:7,column:68}},"7":{start:{line:8,column:8},end:{line:8,column:28}},"8":{start:{line:9,column:8},end:{line:9,column:15}},"9":{start:{line:11,column:8},end:{line:11,column:46}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:19},end:{line:2,column:20}},loc:{start:{line:2,column:35},end:{line:13,column:1}},line:2}},branchMap:{"0":{loc:{start:{line:4,column:4},end:{line:4,column:60}},type:"if",locations:[{start:{line:4,column:4},end:{line:4,column:60}},{start:{line:4,column:4},end:{line:4,column:60}}],line:4}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1d6a3e65335aa7654f500886bf985b0ebd0f32bf"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2jv5mzs72m=function(){return actualCoverage;};}return actualCoverage;}cov_2jv5mzs72m();const jwt=(cov_2jv5mzs72m().s[0]++,require('jsonwebtoken'));cov_2jv5mzs72m().s[1]++;module.exports=(req,res,next)=>{cov_2jv5mzs72m().f[0]++;const token=(cov_2jv5mzs72m().s[2]++,req.header('bearer-token'));cov_2jv5mzs72m().s[3]++;if(!token){cov_2jv5mzs72m().b[0][0]++;cov_2jv5mzs72m().s[4]++;return res.status(401).send('Access Denied');}else{cov_2jv5mzs72m().b[0][1]++;}cov_2jv5mzs72m().s[5]++;try{const verified=(cov_2jv5mzs72m().s[6]++,jwt.verify(token,process.env.secret_token));cov_2jv5mzs72m().s[7]++;req.user=verified;cov_2jv5mzs72m().s[8]++;next();}catch(err){cov_2jv5mzs72m().s[9]++;res.status(400).send('Invalid Token');}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsImhlYWRlciIsInN0YXR1cyIsInNlbmQiLCJ2ZXJpZmllZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJzZWNyZXRfdG9rZW4iLCJ1c2VyIiwiZXJyIl0sInNvdXJjZXMiOlsidmVyaWZ5VG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcclxubW9kdWxlLmV4cG9ydHMgID0gIChyZXEscmVzLG5leHQpPT57XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXIoJ2JlYXJlci10b2tlbicpO1xyXG4gICAgaWYoIXRva2VuKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0FjY2VzcyBEZW5pZWQnKTtcclxuXHJcbiAgICB0cnl7XHJcbiAgICAgICAgY29uc3QgdmVyaWZpZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5zZWNyZXRfdG9rZW4pXHJcbiAgICAgICAgcmVxLnVzZXIgPSB2ZXJpZmllZDtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9IGNhdGNoIChlcnIpe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIFRva2VuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6IjJsREFlWTtBQUFBLDJGQWZaLEtBQU1BLElBQUcsMEJBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUMsMEJBQ25DQyxNQUFNLENBQUNDLE9BQU8sQ0FBSyxDQUFDQyxHQUFHLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHLHlCQUMvQixLQUFNQyxNQUFLLDBCQUFHSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBQyx3QkFDekMsR0FBRyxDQUFDRCxLQUFLLENBQUUsMERBQU9GLElBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUMseURBRXhELEdBQUcsQ0FDQyxLQUFNQyxTQUFRLDBCQUFHWCxHQUFHLENBQUNZLE1BQU0sQ0FBQ0wsS0FBSyxDQUFFTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsWUFBWSxDQUFDLDBCQUM1RFgsR0FBRyxDQUFDWSxJQUFJLENBQUdMLFFBQVEsQ0FBQyx3QkFDcEJMLElBQUksRUFBRSxDQUNWLENBQUUsTUFBT1csR0FBRyxDQUFDLHlCQUNUWixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUN6QyxDQUNKLENBQUMifQ==